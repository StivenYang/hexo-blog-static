<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-FGVBL4CYKC"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-FGVBL4CYKC');
</script>
<!-- End Google Analytics -->

  
  <title>curl命令使用简介 | StivenYang</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="article">
<meta property="og:title" content="curl命令使用简介">
<meta property="og:url" content="https://blog.hengshare.top/2023/04/11/curl%E5%91%BD%E4%BB%A4%E4%BD%BF%E7%94%A8%E7%AE%80%E4%BB%8B/index.html">
<meta property="og:site_name" content="StivenYang">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2023-04-11T06:52:29.000Z">
<meta property="article:modified_time" content="2023-09-27T03:07:42.552Z">
<meta property="article:author" content="StivenYang">
<meta property="article:tag" content="运维">
<meta property="article:tag" content="linux">
<meta property="article:tag" content="网络">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="StivenYang" type="application/atom+xml">
  
  
    <link rel="apple-touch-icon" sizes="180x180" href="images/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="images/favicon-16x16.png">
    <link rel="manifest" href="images/site.webmanifest">
    <!-- <link rel="shortcut icon" href="/images/favicon.png"> -->
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">StivenYang</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">StivenYang的个人网站</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">主页</a>
        
          <a class="main-nav-link" href="/archives">归档</a>
        
          <a class="main-nav-link" href="/tags/%E5%AE%89%E5%85%A8/">安全</a>
        
          <a class="main-nav-link" href="/%E5%85%B3%E4%BA%8E">关于</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS 订阅"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜索"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://blog.hengshare.top"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-curl命令使用简介" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/04/11/curl%E5%91%BD%E4%BB%A4%E4%BD%BF%E7%94%A8%E7%AE%80%E4%BB%8B/" class="article-date">
  <time class="dt-published" datetime="2023-04-11T06:52:29.000Z" itemprop="datePublished">2023-04-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      curl命令使用简介
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
          <div id="toc" class="toc-article">
          <strong class="toc-title">文章目录</strong>
          <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="toc-number">1.</span> <span class="toc-text">参考资料</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E8%AF%B4%E6%98%8E"><span class="toc-number">2.</span> <span class="toc-text">命令说明</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95"><span class="toc-number">3.</span> <span class="toc-text">语法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%89%E9%A1%B9"><span class="toc-number">4.</span> <span class="toc-text">选项</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B"><span class="toc-number">5.</span> <span class="toc-text">使用示例</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD"><span class="toc-number">5.1.</span> <span class="toc-text">文件下载</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BE%93%E5%87%BA%E5%88%B0%E7%BB%88%E7%AB%AF"><span class="toc-number">5.1.1.</span> <span class="toc-text">输出到终端</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BD%E5%B9%B6%E5%86%99%E5%85%A5%E6%96%87%E4%BB%B6"><span class="toc-number">5.1.2.</span> <span class="toc-text">下载并写入文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BD%E5%B9%B6%E5%86%99%E5%85%A5%E6%96%87%E4%BB%B6%EF%BC%8C%E5%B9%B6%E6%98%BE%E7%A4%BA%E8%BF%9B%E5%BA%A6%E6%9D%A1"><span class="toc-number">5.1.3.</span> <span class="toc-text">下载并写入文件，并显示进度条</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BD%E4%B8%94%E4%B8%8D%E6%98%BE%E7%A4%BA%E9%94%99%E8%AF%AF%E5%8F%8A%E8%BF%9B%E5%BA%A6%E4%BF%A1%E6%81%AF"><span class="toc-number">5.2.</span> <span class="toc-text">下载且不显示错误及进度信息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%AD%E7%82%B9%E7%BB%AD%E4%BC%A0"><span class="toc-number">5.3.</span> <span class="toc-text">断点续传</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E5%8F%82%E7%85%A7%E9%A1%B5%E5%AD%97%E7%AC%A6%E4%B8%B2referer"><span class="toc-number">5.4.</span> <span class="toc-text">设置参照页字符串referer</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E7%94%A8%E6%88%B7%E4%BB%A3%E7%90%86%E5%AD%97%E7%AC%A6%E4%B8%B2user-agent"><span class="toc-number">5.5.</span> <span class="toc-text">设置用户代理字符串user-agent</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E5%AE%9A%E8%AF%B7%E6%B1%82%E5%A4%B4%E8%AE%BF%E9%97%AE"><span class="toc-number">5.6.</span> <span class="toc-text">指定请求头访问</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%A6%E5%AE%BD%E6%8E%A7%E5%88%B6%E5%92%8C%E4%B8%8B%E8%BD%BD%E9%85%8D%E9%A2%9D"><span class="toc-number">5.7.</span> <span class="toc-text">带宽控制和下载配额</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%A4%E8%AF%81"><span class="toc-number">5.8.</span> <span class="toc-text">认证</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%AA%E6%89%93%E5%8D%B0%E5%93%8D%E5%BA%94%E5%A4%B4%E9%83%A8%E4%BF%A1%E6%81%AF"><span class="toc-number">5.9.</span> <span class="toc-text">只打印响应头部信息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#get%E8%AF%B7%E6%B1%82"><span class="toc-number">5.10.</span> <span class="toc-text">get请求</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#post%E8%AF%B7%E6%B1%82"><span class="toc-number">5.11.</span> <span class="toc-text">post请求</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%BB%E5%8F%96%E6%9C%AC%E5%9C%B0%E6%96%87%E6%9C%AC%E6%96%87%E4%BB%B6%E7%9A%84%E6%95%B0%E6%8D%AE%EF%BC%8C%E5%90%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%8F%91%E9%80%81"><span class="toc-number">5.12.</span> <span class="toc-text">读取本地文本文件的数据，向服务器发送</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#json%E6%A0%BC%E5%BC%8F%E7%9A%84post%E8%AF%B7%E6%B1%82"><span class="toc-number">5.13.</span> <span class="toc-text">json格式的post请求</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%8F%91%E9%80%81-Cookie"><span class="toc-number">5.14.</span> <span class="toc-text">向服务器发送 Cookie</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Cookie-%E5%86%99%E5%85%A5%E4%B8%80%E4%B8%AA%E6%96%87%E4%BB%B6"><span class="toc-number">5.15.</span> <span class="toc-text">Cookie 写入一个文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E7%9A%84%E6%9D%A5%E6%BA%90"><span class="toc-number">5.16.</span> <span class="toc-text">请求的来源</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8A%E4%BC%A0%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%96%87%E4%BB%B6"><span class="toc-number">5.17.</span> <span class="toc-text">上传二进制文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%B3%E8%BF%87-SSL-%E6%A3%80%E6%B5%8B"><span class="toc-number">5.18.</span> <span class="toc-text">跳过 SSL 检测</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E8%B7%9F%E9%9A%8F%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-number">5.19.</span> <span class="toc-text">请求跟随服务器的重定向</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B0%83%E8%AF%95%E5%8F%82%E6%95%B0"><span class="toc-number">5.20.</span> <span class="toc-text">调试参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E6%9C%AC%E6%9C%BA%E5%A4%96%E7%BD%91ip"><span class="toc-number">5.21.</span> <span class="toc-text">获取本机外网ip</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E7%BD%91%E7%AB%99%E5%8A%A0%E8%BD%BD%E9%80%9F%E5%BA%A6"><span class="toc-number">5.22.</span> <span class="toc-text">测试网站加载速度</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A6%81%E6%B1%82%E8%BF%94%E5%9B%9E%E6%98%AF%E5%8E%8B%E7%BC%A9%E7%9A%84%E7%8A%B6%E6%80%81"><span class="toc-number">5.23.</span> <span class="toc-text">要求返回是压缩的状态</span></a></li></ol></li></ol>
        </div>
        
        <h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p><a target="_blank" rel="noopener" href="https://www.ruanyifeng.com/blog/2019/09/curl-reference.html">https://www.ruanyifeng.com/blog/2019/09/curl-reference.html</a><br><a target="_blank" rel="noopener" href="https://wangchujiang.com/linux-command/c/curl.html">https://wangchujiang.com/linux-command/c/curl.html</a></p>
<h2 id="命令说明"><a href="#命令说明" class="headerlink" title="命令说明"></a>命令说明</h2><p>利用URL规则在命令行下工作的文件传输工具</p>
<p>curl命令 是一个利用URL规则在命令行下工作的文件传输工具。它支持文件的上传和下载，所以是综合传输工具，但按传统，习惯称curl为下载工具。作为一款强力工具，curl支持包括HTTP、HTTPS、ftp等众多协议，还支持POST、cookies、认证、从指定偏移处下载部分文件、用户代理字符串、限速、文件大小、进度条等特征。做网页处理流程和数据检索自动化，curl可以助一臂之力。</p>
<h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl (选项) (参数)</span><br></pre></td></tr></table></figure>

<h2 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line">-a/--append                                   <span class="comment"># 上传文件时，附加到目标文件 </span></span><br><span class="line">-A/--user-agent                               <span class="comment"># 设置用户代理发送给服务器 </span></span><br><span class="line">-anyauth                                      <span class="comment"># 可以使用“任何”身份验证方法 </span></span><br><span class="line">-b/--cookie                                   <span class="comment"># cookie字符串或文件读取位置 </span></span><br><span class="line">     --basic                                  <span class="comment"># 使用HTTP基本验证 </span></span><br><span class="line">-B/--use-ascii                                <span class="comment"># 使用ASCII /文本传输 </span></span><br><span class="line">-c/--cookie-jar                               <span class="comment"># 操作结束后把cookie写入到这个文件中 </span></span><br><span class="line">-C/--continue-at                              <span class="comment"># 断点续传 </span></span><br><span class="line">-d/--data                                     <span class="comment"># HTTP POST方式传送数据 </span></span><br><span class="line">     --data-ascii                             <span class="comment"># 以ascii的方式post数据 </span></span><br><span class="line">     --data-binary                            <span class="comment"># 以二进制的方式post数据 </span></span><br><span class="line">     --negotiate                              <span class="comment"># 使用HTTP身份验证 </span></span><br><span class="line">     --digest                                 <span class="comment"># 使用数字身份验证 </span></span><br><span class="line">     --disable-eprt                           <span class="comment"># 禁止使用EPRT或LPRT </span></span><br><span class="line">     --disable-epsv                           <span class="comment"># 禁止使用EPSV </span></span><br><span class="line">-D/--dump-header                              <span class="comment"># 把header信息写入到该文件中 </span></span><br><span class="line">     --egd-file                               <span class="comment"># 为随机数据(SSL)设置EGD socket路径 </span></span><br><span class="line">     --tcp-nodelay                            <span class="comment"># 使用TCP\_NODELAY选项 </span></span><br><span class="line">-e/--referer                                  <span class="comment"># 来源网址 </span></span><br><span class="line">-E/--cert                                     <span class="comment"># 客户端证书文件和密码 (SSL)</span></span><br><span class="line">     --cert-type                              <span class="comment"># 证书文件类型 (DER/PEM/ENG) (SSL)</span></span><br><span class="line">     --key                                    <span class="comment"># 私钥文件名 (SSL)</span></span><br><span class="line">     --key-type                               <span class="comment"># 私钥文件类型 (DER/PEM/ENG) (SSL)</span></span><br><span class="line">     --pass                                   <span class="comment"># 私钥密码 (SSL)</span></span><br><span class="line">     --engine                                 <span class="comment"># 加密引擎使用 (SSL). &quot;--engine list&quot; for list </span></span><br><span class="line">     --cacert                                 <span class="comment"># CA证书 (SSL)</span></span><br><span class="line">     --capath                                 <span class="comment"># CA目录 (made using c\_rehash) to verify peer against (SSL)</span></span><br><span class="line">     --ciphers                                <span class="comment"># SSL密码 </span></span><br><span class="line">     --compressed                             <span class="comment"># 要求返回是压缩的形势 (using deflate or gzip)</span></span><br><span class="line">     --connect-timeout                        <span class="comment"># 设置最大请求时间 </span></span><br><span class="line">     --create-dirs                            <span class="comment"># 建立本地目录的目录层次结构 </span></span><br><span class="line">     --crlf                                   <span class="comment"># 上传是把LF转变成CRLF </span></span><br><span class="line">-f/--fail                                     <span class="comment"># 连接失败时不显示http错误 </span></span><br><span class="line">     --ftp-create-dirs                        <span class="comment"># 如果远程目录不存在，创建远程目录 </span></span><br><span class="line">     --ftp-method \[multicwd/nocwd/singlecwd] <span class="comment"># 控制CWD的使用 </span></span><br><span class="line">     --ftp-pasv                               <span class="comment"># 使用 PASV/EPSV 代替端口 </span></span><br><span class="line">     --ftp-skip-pasv-ip                       <span class="comment"># 使用PASV的时候,忽略该IP地址 </span></span><br><span class="line">     --ftp-ssl                                <span class="comment"># 尝试用 SSL/TLS 来进行ftp数据传输 </span></span><br><span class="line">     --ftp-ssl-reqd                           <span class="comment"># 要求用 SSL/TLS 来进行ftp数据传输 </span></span><br><span class="line">-F/--form                                     <span class="comment"># 模拟http表单提交数据 </span></span><br><span class="line">     --form-string                            <span class="comment"># 模拟http表单提交数据 </span></span><br><span class="line">-g/--globoff                                  <span class="comment"># 禁用网址序列和范围使用&#123;&#125;和\[] </span></span><br><span class="line">-G/--get                                      <span class="comment"># 以get的方式来发送数据 </span></span><br><span class="line">-H/--header                                   <span class="comment"># 自定义头信息传递给服务器 </span></span><br><span class="line">     --ignore-content-length                  <span class="comment"># 忽略的HTTP头信息的长度 </span></span><br><span class="line">-i/--include                                  <span class="comment"># 输出时包括protocol头信息 </span></span><br><span class="line">-I/--head                                     <span class="comment"># 只显示请求头信息 </span></span><br><span class="line">-j/--junk-session-cookies                     <span class="comment"># 读取文件进忽略session cookie </span></span><br><span class="line">     --interface                              <span class="comment"># 使用指定网络接口/地址 </span></span><br><span class="line">     --krb4                                   <span class="comment"># 使用指定安全级别的krb4 </span></span><br><span class="line">-k/--insecure                                 <span class="comment"># 允许不使用证书到SSL站点 </span></span><br><span class="line">-K/--config                                   <span class="comment"># 指定的配置文件读取 </span></span><br><span class="line">-l/--list-only                                <span class="comment"># 列出ftp目录下的文件名称 </span></span><br><span class="line">     --limit-rate                             <span class="comment"># 设置传输速度 </span></span><br><span class="line">     --local-port                             <span class="comment"># 强制使用本地端口号 </span></span><br><span class="line">-m/--max-time                                 <span class="comment"># 设置最大传输时间 </span></span><br><span class="line">     --max-redirs                             <span class="comment"># 设置最大读取的目录数 </span></span><br><span class="line">     --max-filesize                           <span class="comment"># 设置最大下载的文件总量 </span></span><br><span class="line">-M/--manual                                   <span class="comment"># 显示全手动 </span></span><br><span class="line">-n/--netrc                                    <span class="comment"># 从netrc文件中读取用户名和密码 </span></span><br><span class="line">     --netrc-optional                         <span class="comment"># 使用 .netrc 或者 URL来覆盖-n </span></span><br><span class="line">     --ntlm                                   <span class="comment"># 使用 HTTP NTLM 身份验证 </span></span><br><span class="line">-N/--no-buffer                                <span class="comment"># 禁用缓冲输出 </span></span><br><span class="line">-o/--output                                   <span class="comment"># 把输出写到该文件中 </span></span><br><span class="line">-O/--remote-name                              <span class="comment"># 把输出写到该文件中，保留远程文件的文件名 </span></span><br><span class="line">-p/--proxytunnel                              <span class="comment"># 使用HTTP代理 </span></span><br><span class="line">     --proxy-anyauth                          <span class="comment"># 选择任一代理身份验证方法 </span></span><br><span class="line">     --proxy-basic                            <span class="comment"># 在代理上使用基本身份验证 </span></span><br><span class="line">     --proxy-digest                           <span class="comment"># 在代理上使用数字身份验证 </span></span><br><span class="line">     --proxy-ntlm                             <span class="comment"># 在代理上使用ntlm身份验证 </span></span><br><span class="line">-P/--ftp-port                                 <span class="comment"># 使用端口地址，而不是使用PASV </span></span><br><span class="line">-q                                            <span class="comment"># 作为第一个参数，关闭 .curlrc </span></span><br><span class="line">-Q/--quote                                    <span class="comment"># 文件传输前，发送命令到服务器 </span></span><br><span class="line">-r/--range                                    <span class="comment"># 检索来自HTTP/1.1或FTP服务器字节范围 </span></span><br><span class="line">--range-file                                  <span class="comment"># 读取（SSL）的随机文件 </span></span><br><span class="line">-R/--remote-time                              <span class="comment"># 在本地生成文件时，保留远程文件时间 </span></span><br><span class="line">     --retry                                  <span class="comment"># 传输出现问题时，重试的次数 </span></span><br><span class="line">     --retry-delay                            <span class="comment"># 传输出现问题时，设置重试间隔时间 </span></span><br><span class="line">     --retry-max-time                         <span class="comment"># 传输出现问题时，设置最大重试时间 </span></span><br><span class="line">-s/--silent                                   <span class="comment"># 静默模式。不输出任何东西 </span></span><br><span class="line">-S/--show-error                               <span class="comment"># 显示错误 </span></span><br><span class="line">     --socks4                                 <span class="comment"># 用socks4代理给定主机和端口 </span></span><br><span class="line">     --socks5                                 <span class="comment"># 用socks5代理给定主机和端口 </span></span><br><span class="line">     --stderr                                 <span class="comment">#   </span></span><br><span class="line">-t/--telnet-option                            <span class="comment"># Telnet选项设置 </span></span><br><span class="line">     --trace                                  <span class="comment"># 对指定文件进行debug </span></span><br><span class="line">     --trace-ascii                            <span class="comment"># Like --跟踪但没有hex输出 </span></span><br><span class="line">     --trace-time                             <span class="comment"># 跟踪/详细输出时，添加时间戳 </span></span><br><span class="line">-T/--upload-file                              <span class="comment"># 上传文件 </span></span><br><span class="line">     --url                                    <span class="comment"># Spet URL to work with </span></span><br><span class="line">-u/--user                                     <span class="comment"># 设置服务器的用户和密码 </span></span><br><span class="line">-U/--proxy-user                               <span class="comment"># 设置代理用户名和密码 </span></span><br><span class="line">-w/--write-out \[format]                      <span class="comment"># 什么输出完成后 </span></span><br><span class="line">-x/--proxy                                    <span class="comment"># 在给定的端口上使用HTTP代理 </span></span><br><span class="line">-X/--request                                  <span class="comment"># 指定什么命令 </span></span><br><span class="line">-y/--speed-time                               <span class="comment"># 放弃限速所要的时间，默认为30 </span></span><br><span class="line">-Y/--speed-limit                              <span class="comment"># 停止传输速度的限制，速度时间 </span></span><br></pre></td></tr></table></figure>

<h2 id="使用示例"><a href="#使用示例" class="headerlink" title="使用示例"></a>使用示例</h2><h3 id="文件下载"><a href="#文件下载" class="headerlink" title="文件下载"></a>文件下载</h3><h4 id="输出到终端"><a href="#输出到终端" class="headerlink" title="输出到终端"></a>输出到终端</h4><p>curl命令可以用来执行下载、发送各种HTTP请求，指定HTTP头部等操作。如果系统没有curl可以使用yum install curl安装，也可以下载安装。curl是将下载文件输出到stdout，将进度信息输出到stderr，不显示进度信息使用–silent选项。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl URL --silent</span><br></pre></td></tr></table></figure>
<p>这条命令是将下载文件输出到终端，所有下载的数据都被写入到stdout。</p>
<h4 id="下载并写入文件"><a href="#下载并写入文件" class="headerlink" title="下载并写入文件"></a>下载并写入文件</h4><p>使用选项-O将下载的数据写入到文件，必须使用文件的绝对地址：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl http://example.com/text.iso --silent -O</span><br></pre></td></tr></table></figure>

<h4 id="下载并写入文件，并显示进度条"><a href="#下载并写入文件，并显示进度条" class="headerlink" title="下载并写入文件，并显示进度条"></a>下载并写入文件，并显示进度条</h4><p>选项-o将下载数据写入到指定名称的文件中，并使用–progress显示进度条：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl http://example.com/test.iso -o filename.iso --progress</span><br></pre></td></tr></table></figure>

<h3 id="下载且不显示错误及进度信息"><a href="#下载且不显示错误及进度信息" class="headerlink" title="下载且不显示错误及进度信息"></a>下载且不显示错误及进度信息</h3><p>-s 参数将不输出错误和进度信息</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 发生错误，不会显示错误信息。不发生错误的话，会正常显示运行结果。</span></span><br><span class="line">curl -s https://www.example.com</span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果想让 curl 不产生任何输出，可以使用下面的命令。</span></span><br><span class="line">curl -s -o /dev/null https://google.com</span><br></pre></td></tr></table></figure>

<h3 id="断点续传"><a href="#断点续传" class="headerlink" title="断点续传"></a>断点续传</h3><p>curl能够从特定的文件偏移处继续下载，它可以通过指定一个偏移量来下载部分文件：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl URL/File -C 偏移量</span><br><span class="line"></span><br><span class="line"><span class="comment">#偏移量是以字节为单位的整数，如果让curl自动推断出正确的续传位置使用-C -：</span></span><br></pre></td></tr></table></figure>

<h3 id="设置参照页字符串referer"><a href="#设置参照页字符串referer" class="headerlink" title="设置参照页字符串referer"></a>设置参照页字符串referer</h3><p>参照页是位于HTTP头部中的一个字符串，用来表示用户是从哪个页面到达当前页面的，如果用户点击网页A中的某个连接，那么用户就会跳转到B网页，网页B头部的参照页字符串就包含网页A的URL。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl --referer http://www.google.com http://wangchujiang.com</span><br></pre></td></tr></table></figure>

<h3 id="设置用户代理字符串user-agent"><a href="#设置用户代理字符串user-agent" class="headerlink" title="设置用户代理字符串user-agent"></a>设置用户代理字符串user-agent</h3><p>有些网站访问会提示只能使用IE浏览器来访问，这是因为这些网站设置了检查用户代理，可以使用curl把用户代理设置为IE，这样就可以访问了。使用<code>--user-agent</code>或者<code>-A</code>选项：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl URL --user-agent <span class="string">&quot;Mozilla/5.0&quot;</span></span><br><span class="line">curl URL -A <span class="string">&quot;Mozilla/5.0&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="指定请求头访问"><a href="#指定请求头访问" class="headerlink" title="指定请求头访问"></a>指定请求头访问</h3><p>其他HTTP头部信息也可以使用curl来发送，使用-H “头部信息” 传递多个头部信息，例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">curl -H <span class="string">&#x27;Accept-Language: en-US&#x27;</span> https://google.com</span><br><span class="line"><span class="comment"># 上面命令添加 HTTP 标头 Accept-Language: en-US。</span></span><br><span class="line"></span><br><span class="line">curl -H <span class="string">&#x27;Accept-Language: en-US&#x27;</span> -H <span class="string">&#x27;Secret-Message: xyzzy&#x27;</span> https://google.com</span><br><span class="line"><span class="comment"># 上面命令添加两个 HTTP 标头。</span></span><br><span class="line"></span><br><span class="line">curl -d <span class="string">&#x27;&#123;&quot;login&quot;: &quot;emma&quot;, &quot;pass&quot;: &quot;123&quot;&#125;&#x27;</span> -H <span class="string">&#x27;Content-Type: application/json&#x27;</span> https://google.com/login</span><br><span class="line"><span class="comment"># 上面命令添加 HTTP 请求的标头是 Content-Type: application/json，然后用 -d 参数发送 JSON 数据。</span></span><br></pre></td></tr></table></figure>

<h3 id="带宽控制和下载配额"><a href="#带宽控制和下载配额" class="headerlink" title="带宽控制和下载配额"></a>带宽控制和下载配额</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用--limit-rate限制curl的下载速度：</span></span><br><span class="line"><span class="comment"># 命令中用k（千字节）和m（兆字节）指定下载速度限制。</span></span><br><span class="line">curl URL --limit-rate 50k</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用--max-filesize指定可下载的最大文件大小：</span></span><br><span class="line">curl URL --max-filesize bytes</span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果文件大小超出限制，命令则返回一个非0退出码，如果命令正常则返回0。</span></span><br><span class="line">curl --limit-rate 200k https://example.com</span><br></pre></td></tr></table></figure>

<h3 id="认证"><a href="#认证" class="headerlink" title="认证"></a>认证</h3><p>使用curl选项 -u 可以完成HTTP或者FTP的认证，可以指定密码，也可以不指定密码在后续操作中输入密码：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -u user:<span class="built_in">pwd</span> http://wangchujiang.com</span><br><span class="line">curl -u user http://wangchujiang.com</span><br></pre></td></tr></table></figure>

<h3 id="只打印响应头部信息"><a href="#只打印响应头部信息" class="headerlink" title="只打印响应头部信息"></a>只打印响应头部信息</h3><p>通过-I或者-head可以只打印出HTTP头部信息：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -I http://wangchujiang.com</span><br></pre></td></tr></table></figure>

<h3 id="get请求"><a href="#get请求" class="headerlink" title="get请求"></a>get请求</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">curl <span class="string">&quot;http://www.wangchujiang.com&quot;</span>    <span class="comment"># 如果这里的URL指向的是一个文件或者一幅图都可以直接下载到本地</span></span><br><span class="line">curl -i <span class="string">&quot;http://www.wangchujiang.com&quot;</span> <span class="comment"># 显示全部信息</span></span><br><span class="line">curl -l <span class="string">&quot;http://www.wangchujiang.com&quot;</span> <span class="comment"># 显示页面内容</span></span><br><span class="line">curl -v <span class="string">&quot;http://www.wangchujiang.com&quot;</span> <span class="comment"># 显示get请求全过程解析</span></span><br></pre></td></tr></table></figure>

<h3 id="post请求"><a href="#post请求" class="headerlink" title="post请求"></a>post请求</h3><p><code>--data-urlencode</code> 参数等同于 <code>-d</code>，发送 POST 请求的数据体，区别在于会自动将发送的数据进行 URL 编码。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">curl -d <span class="string">&quot;param1=value1&amp;param2=value2&quot;</span> <span class="string">&quot;http://www.wangchujiang.com/login&quot;</span></span><br><span class="line"></span><br><span class="line">curl -d<span class="string">&#x27;login=emma＆password=123&#x27;</span> -X POST https://wangchujiang.com/login</span><br><span class="line"></span><br><span class="line">curl -d <span class="string">&#x27;login=emma&#x27;</span> -d <span class="string">&#x27;password=123&#x27;</span> -X POST  https://wangchujiang.com/login</span><br><span class="line"></span><br><span class="line">curl --data-urlencode <span class="string">&#x27;comment=hello world&#x27;</span> https://wangchujiang.com/login</span><br><span class="line"><span class="comment"># 上面代码中，发送的数据hello world之间有一个空格，需要进行 URL 编码。</span></span><br></pre></td></tr></table></figure>

<h3 id="读取本地文本文件的数据，向服务器发送"><a href="#读取本地文本文件的数据，向服务器发送" class="headerlink" title="读取本地文本文件的数据，向服务器发送"></a>读取本地文本文件的数据，向服务器发送</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -d <span class="string">&#x27;@data.txt&#x27;</span> https://wangchujiang.com/upload</span><br><span class="line"><span class="comment"># 读取data.txt文件的内容，作为数据体向服务器发送。</span></span><br></pre></td></tr></table></figure>

<h3 id="json格式的post请求"><a href="#json格式的post请求" class="headerlink" title="json格式的post请求"></a>json格式的post请求</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -l -H <span class="string">&quot;Content-type: application/json&quot;</span> -X POST -d <span class="string">&#x27;&#123;&quot;phone&quot;:&quot;13521389587&quot;,&quot;password&quot;:&quot;test&quot;&#125;&#x27;</span> http://wangchujiang.com/apis/users.json</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="向服务器发送-Cookie"><a href="#向服务器发送-Cookie" class="headerlink" title="向服务器发送 Cookie"></a>向服务器发送 Cookie</h3><p>使用<code>--cookie &quot;COKKIES&quot;</code>选项来指定cookie，多个cookie使用分号分隔：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">curl http://wangchujiang.com --cookie <span class="string">&quot;user=root;pass=123456&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 将cookie另存为一个文件，使用--cookie-jar选项：</span></span><br><span class="line">curl URL --cookie-jar cookie_file</span><br><span class="line"></span><br><span class="line"><span class="comment"># -b 参数用来向服务器发送 Cookie。</span></span><br><span class="line">curl -b <span class="string">&#x27;foo=bar&#x27;</span> https://taobao.com</span><br><span class="line"><span class="comment"># 上面命令会生成一个标头Cookie: foo=bar，向服务器发送一个名为foo、值为bar的 Cookie。</span></span><br><span class="line"></span><br><span class="line">curl -b cookies.txt https://www.taobao.com</span><br><span class="line"><span class="comment"># 上面命令读取本地文件 cookies.txt，里面是服务器设置的 Cookie（参见-c参数），将其发送到服务器。</span></span><br></pre></td></tr></table></figure>

<h3 id="Cookie-写入一个文件"><a href="#Cookie-写入一个文件" class="headerlink" title="Cookie 写入一个文件"></a>Cookie 写入一个文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -c cookies.txt https://www.taobao.com</span><br><span class="line"><span class="comment"># 上面命令将服务器的 HTTP 回应所设置 Cookie 写入文本文件cookies.txt。</span></span><br></pre></td></tr></table></figure>

<h3 id="请求的来源"><a href="#请求的来源" class="headerlink" title="请求的来源"></a>请求的来源</h3><p>-e 参数用来设置 HTTP 的标头 Referer，表示请求的来源。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">curl -e <span class="string">&#x27;https://taobao.com?q=example&#x27;</span> https://www.example.com</span><br><span class="line"><span class="comment"># 上面命令将Referer标头设为 https://taobao.com?q=example。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -H 参数可以通过直接添加标头 Referer，达到同样效果</span></span><br><span class="line">curl -H <span class="string">&#x27;Referer: https://taobao.com?q=example&#x27;</span> https://www.example.com</span><br></pre></td></tr></table></figure>

<h3 id="上传二进制文件"><a href="#上传二进制文件" class="headerlink" title="上传二进制文件"></a>上传二进制文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -F 参数用来向服务器上传二进制文件。</span></span><br><span class="line">curl -F <span class="string">&#x27;file=@photo.png&#x27;</span> https://taobao.com/profile</span><br><span class="line"><span class="comment"># 上面命令会给 HTTP 请求加上标头 Content-Type: multipart/form-data ，然后将文件photo.png作为file字段上传。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -F 参数可以指定 MIME 类型。</span></span><br><span class="line">curl -F <span class="string">&#x27;file=@photo.png;type=image/png&#x27;</span> https://taobao.com/profile</span><br><span class="line"><span class="comment"># 上面命令指定 MIME 类型为image/png，否则 curl 会把 MIME 类型设为 application/octet-stream。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -F 参数也可以指定文件名。</span></span><br><span class="line">curl -F <span class="string">&#x27;file=@photo.png;filename=me.png&#x27;</span> https://taobao.com/profile</span><br><span class="line"><span class="comment"># 上面命令中，原始文件名为photo.png，但是服务器接收到的文件名为me.png。</span></span><br></pre></td></tr></table></figure>

<h3 id="跳过-SSL-检测"><a href="#跳过-SSL-检测" class="headerlink" title="跳过 SSL 检测"></a>跳过 SSL 检测</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -k https://www.example.com</span><br><span class="line"><span class="comment"># 上面命令不会检查服务器的 SSL 证书是否正确。</span></span><br></pre></td></tr></table></figure>

<h3 id="请求跟随服务器的重定向"><a href="#请求跟随服务器的重定向" class="headerlink" title="请求跟随服务器的重定向"></a>请求跟随服务器的重定向</h3><p>-L 参数会让 HTTP 请求跟随服务器的重定向。curl 默认不跟随重定向。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -L -d <span class="string">&#x27;tweet=hi&#x27;</span> https://api.example.com/tweet</span><br></pre></td></tr></table></figure>

<h3 id="调试参数"><a href="#调试参数" class="headerlink" title="调试参数"></a>调试参数</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -v 参数输出通信的整个过程，用于调试</span></span><br><span class="line">curl -v https://www.example.com</span><br><span class="line"></span><br><span class="line"><span class="comment"># --trace参数也可以用于调试，还会输出原始的二进制数据。</span></span><br><span class="line">curl --trace - https://www.example.com</span><br></pre></td></tr></table></figure>

<h3 id="获取本机外网ip"><a href="#获取本机外网ip" class="headerlink" title="获取本机外网ip"></a>获取本机外网ip</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获取本机外网ip</span></span><br><span class="line">curl ipecho.net/plain</span><br><span class="line">curl cip.cc</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取指定ip对应的位置</span></span><br><span class="line">curl cip.cc/ip</span><br></pre></td></tr></table></figure>

<h3 id="测试网站加载速度"><a href="#测试网站加载速度" class="headerlink" title="测试网站加载速度"></a>测试网站加载速度</h3><p>命令有一个鲜为人知的选项，-w，该选项在请求结束之后打印本次请求的统计数据到标准输出。</p>
<p>首先，我们定义控制打印行为的格式化字符串。新建文本文件 fmt.txt，并填入下面的内容：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">\n</span><br><span class="line">Response Time for: %&#123;url_effective&#125;\n\n</span><br><span class="line">DNS Lookup Time:\t\t%&#123;time_namelookup&#125;s\n</span><br><span class="line">Redirection Time:\t\t%&#123;time_redirect&#125;s\n</span><br><span class="line">Connection Time:\t\t%&#123;time_connect&#125;s\n</span><br><span class="line">App Connection Time:\t\t%&#123;time_appconnect&#125;s\n</span><br><span class="line">Pre-transfer Time:\t\t%&#123;time_pretransfer&#125;s\n</span><br><span class="line">Start-transfer Time:\t\t%&#123;time_starttransfer&#125;s\n\n</span><br><span class="line">Total Time:\t\t\t%&#123;time_total&#125;s\n</span><br></pre></td></tr></table></figure>
<p>curl 提供了很多置换变量，可以在格式化字符串中通过 <code>%&#123;var&#125;</code> 的形式使用。完整的变量列表可以在 curl 的 manpage 中查看。简单介绍一下我们使用的这几个变量：</p>
<ul>
<li>url_effective: 执行完地址重定向之后的最终 URL；</li>
<li>time_namelookup: 从请求开始至完成名称解析所花的时间，单位为秒，下同；</li>
<li>time_redirect: 执行所有重定向所花的时间；</li>
<li>time_connect: 从请求开始至建立 TCP 连接所花的时间；</li>
<li>time_appconnect: 从请求开始至完成 SSL&#x2F;SSH 握手所花的时间；</li>
<li>time_pretransfer: 从请求开始至服务器准备传送文件所花的时间，包含了传送协商时间；</li>
<li>time_starttransfer: 从请求开始至服务器准备传送第一个字节所花的时间；</li>
<li>time_total: 完整耗时。</li>
</ul>
<p>然后执行请求，通过<code>@filename</code> 指定保存了格式化字符串的文件：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">curl -L -s -w @fmt.txt -o /dev/null http://www.google.com</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出：</span></span><br><span class="line"><span class="comment"># Response Time for: http://www.google.co.jp/?gfe_rd=cr&amp;dcr=0&amp;ei=cjIaWpTkHeiQ8QfnxYzoBA</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># DNS Lookup Time:        0.000038s</span></span><br><span class="line"><span class="comment"># Redirection Time:       0.207271s</span></span><br><span class="line"><span class="comment"># Connection Time:        0.000039s</span></span><br><span class="line"><span class="comment"># App Connection Time:    0.000039s</span></span><br><span class="line"><span class="comment"># Pre-transfer Time:      0.000067s</span></span><br><span class="line"><span class="comment"># Start-transfer Time:    0.260115s</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Total Time:             0.467691s</span></span><br></pre></td></tr></table></figure>

<h3 id="要求返回是压缩的状态"><a href="#要求返回是压缩的状态" class="headerlink" title="要求返回是压缩的状态"></a>要求返回是压缩的状态</h3><p><code>--compressed</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl --compressed -o- -L https://yarnpkg.com/install.sh | bash</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.hengshare.top/2023/04/11/curl%E5%91%BD%E4%BB%A4%E4%BD%BF%E7%94%A8%E7%AE%80%E4%BB%8B/" data-id="cln162dk90008w04eec1v9kd0" data-title="curl命令使用简介" class="article-share-link">分享</a>
      
      
        <a href="/2023/04/11/curl%E5%91%BD%E4%BB%A4%E4%BD%BF%E7%94%A8%E7%AE%80%E4%BB%8B/#comments" class="article-comment-link">
          <span class="post-comments-count valine-comment-count" data-xid="/2023/04/11/curl%E5%91%BD%E4%BB%A4%E4%BD%BF%E7%94%A8%E7%AE%80%E4%BB%8B/" itemprop="commentCount"></span>
          留言
        </a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux/" rel="tag">linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%BD%91%E7%BB%9C/" rel="tag">网络</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%BF%90%E7%BB%B4/" rel="tag">运维</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2023/04/11/%E5%9B%BD%E5%86%85%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AE%E4%BD%BF%E7%94%A8chatgpt%E9%A6%96%E9%A1%B5%EF%BC%8C%E9%82%A3%E8%BF%98%E8%83%BD%E6%80%8E%E4%B9%88%E7%8E%A9%E5%91%A2%EF%BC%9F/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">前一篇</strong>
      <div class="article-nav-title">
        
          国内无法访问使用chatgpt首页，那还能怎么玩呢？
        
      </div>
    </a>
  
  
    <a href="/2023/04/10/%E5%85%B3%E9%97%ADwindows%E7%97%85%E6%AF%92%E9%98%B2%E6%8A%A4/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">后一篇</strong>
      <div class="article-nav-title">关闭windows病毒防护</div>
    </a>
  
</nav>

  
</article>



  <section id="comments" class="vcomment">

  </section>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/10/">十月 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/09/">九月 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/06/">六月 2023</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">五月 2023</a><span class="archive-list-count">17</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/04/">四月 2023</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/03/">三月 2023</a><span class="archive-list-count">36</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>


  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/AI/" rel="tag">AI</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android/" rel="tag">Android</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Docker/" rel="tag">Docker</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/" rel="tag">Java</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MQ/" rel="tag">MQ</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MacOs/" rel="tag">MacOs</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redis/" rel="tag">Redis</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/chrome%E6%8F%92%E4%BB%B6/" rel="tag">chrome插件</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/" rel="tag">css</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gcc/" rel="tag">gcc</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/" rel="tag">git</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/go/" rel="tag">go</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/" rel="tag">hexo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/html/" rel="tag">html</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/k3s/" rel="tag">k3s</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kubernates/" rel="tag">kubernates</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/" rel="tag">linux</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lua/" rel="tag">lua</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/maven/" rel="tag">maven</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mq/" rel="tag">mq</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/" rel="tag">mysql</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nginx/" rel="tag">nginx</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/openrestry/" rel="tag">openrestry</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/picgo/" rel="tag">picgo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vmware/" rel="tag">vmware</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vscode/" rel="tag">vscode</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/zsh/" rel="tag">zsh</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%AD%E9%97%B4%E4%BB%B6/" rel="tag">中间件</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BA%A7%E7%BA%BF%E9%97%AE%E9%A2%98/" rel="tag">产线问题</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BB%A3%E7%90%86/" rel="tag">代理</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%90%8D%E8%AF%8D%E8%A7%A3%E9%87%8A/" rel="tag">名词解释</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%90%8E%E7%AB%AF/" rel="tag">后端</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" rel="tag">基础知识</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AE%89%E5%85%A8/" rel="tag">安全</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93/" rel="tag">工作总结</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B7%A5%E5%85%B7/" rel="tag">工具</a><span class="tag-list-count">19</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/" rel="tag">开发工具</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag">数据库</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%97%A5%E5%B8%B8%E9%9A%8F%E7%AC%94/" rel="tag">日常随笔</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B5%8B%E8%AF%95/" rel="tag">测试</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BD%91%E7%BB%9C/" rel="tag">网络</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BF%90%E7%BB%B4/" rel="tag">运维</a><span class="tag-list-count">14</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%80%86%E5%90%91/" rel="tag">逆向</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9A%8F%E7%AC%94/" rel="tag">随笔</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%BB%91%E8%8B%B9%E6%9E%9C/" rel="tag">黑苹果</a><span class="tag-list-count">7</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/10/19/ai/%E8%87%AA%E5%BB%BAchatgpt/">搭建属于自己的chatgpt</a>
          </li>
        
          <li>
            <a href="/2023/09/27/springboot%E4%B8%ADwebsocket%E4%BD%BF%E7%94%A8/">springboot中websocket使用</a>
          </li>
        
          <li>
            <a href="/2023/06/16/%E5%9B%BE%E5%83%8F-jpg-png%E7%AD%89%E5%9B%BE%E7%89%87%E6%A0%BC%E5%BC%8F%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB/">图像-jpg,png等图片格式有什么区别</a>
          </li>
        
          <li>
            <a href="/2023/06/08/consul-%E7%AE%80%E5%8D%95%E4%BB%8B%E7%BB%8D/">consul-简单介绍</a>
          </li>
        
          <li>
            <a href="/2023/06/02/go-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">go-学习笔记</a>
          </li>
        
          <li>
            <a href="/2023/06/02/go-%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Go-Modules%E7%9A%84go-mod%E4%B8%8Ego-sum/">go-深入理解Go Modules的go.mod与go.sum</a>
          </li>
        
          <li>
            <a href="/2023/05/31/ffplay%E5%8F%82%E6%95%B0%E4%BB%A5%E5%8F%8A%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/">ffplay参数以及常用命令</a>
          </li>
        
          <li>
            <a href="/2023/05/31/ffprobe%E5%8F%82%E6%95%B0%E4%BB%A5%E5%8F%8A%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/">ffprobe参数以及常用命令</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/AI/" style="font-size: 12.5px;">AI</a> <a href="/tags/Android/" style="font-size: 10px;">Android</a> <a href="/tags/Docker/" style="font-size: 10px;">Docker</a> <a href="/tags/Java/" style="font-size: 10px;">Java</a> <a href="/tags/MQ/" style="font-size: 10px;">MQ</a> <a href="/tags/MacOs/" style="font-size: 16.25px;">MacOs</a> <a href="/tags/Redis/" style="font-size: 10px;">Redis</a> <a href="/tags/chrome%E6%8F%92%E4%BB%B6/" style="font-size: 10px;">chrome插件</a> <a href="/tags/css/" style="font-size: 11.25px;">css</a> <a href="/tags/gcc/" style="font-size: 10px;">gcc</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/go/" style="font-size: 11.25px;">go</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/html/" style="font-size: 10px;">html</a> <a href="/tags/k3s/" style="font-size: 17.5px;">k3s</a> <a href="/tags/kubernates/" style="font-size: 17.5px;">kubernates</a> <a href="/tags/linux/" style="font-size: 16.25px;">linux</a> <a href="/tags/lua/" style="font-size: 10px;">lua</a> <a href="/tags/maven/" style="font-size: 10px;">maven</a> <a href="/tags/mq/" style="font-size: 10px;">mq</a> <a href="/tags/mysql/" style="font-size: 10px;">mysql</a> <a href="/tags/nginx/" style="font-size: 13.75px;">nginx</a> <a href="/tags/openrestry/" style="font-size: 11.25px;">openrestry</a> <a href="/tags/picgo/" style="font-size: 10px;">picgo</a> <a href="/tags/vmware/" style="font-size: 10px;">vmware</a> <a href="/tags/vscode/" style="font-size: 12.5px;">vscode</a> <a href="/tags/zsh/" style="font-size: 10px;">zsh</a> <a href="/tags/%E4%B8%AD%E9%97%B4%E4%BB%B6/" style="font-size: 10px;">中间件</a> <a href="/tags/%E4%BA%A7%E7%BA%BF%E9%97%AE%E9%A2%98/" style="font-size: 11.25px;">产线问题</a> <a href="/tags/%E4%BB%A3%E7%90%86/" style="font-size: 11.25px;">代理</a> <a href="/tags/%E5%90%8D%E8%AF%8D%E8%A7%A3%E9%87%8A/" style="font-size: 10px;">名词解释</a> <a href="/tags/%E5%90%8E%E7%AB%AF/" style="font-size: 10px;">后端</a> <a href="/tags/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" style="font-size: 11.25px;">基础知识</a> <a href="/tags/%E5%AE%89%E5%85%A8/" style="font-size: 10px;">安全</a> <a href="/tags/%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93/" style="font-size: 10px;">工作总结</a> <a href="/tags/%E5%B7%A5%E5%85%B7/" style="font-size: 20px;">工具</a> <a href="/tags/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/" style="font-size: 11.25px;">开发工具</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" style="font-size: 10px;">数据库</a> <a href="/tags/%E6%97%A5%E5%B8%B8%E9%9A%8F%E7%AC%94/" style="font-size: 12.5px;">日常随笔</a> <a href="/tags/%E6%B5%8B%E8%AF%95/" style="font-size: 10px;">测试</a> <a href="/tags/%E7%BD%91%E7%BB%9C/" style="font-size: 15px;">网络</a> <a href="/tags/%E8%BF%90%E7%BB%B4/" style="font-size: 18.75px;">运维</a> <a href="/tags/%E9%80%86%E5%90%91/" style="font-size: 10px;">逆向</a> <a href="/tags/%E9%9A%8F%E7%AC%94/" style="font-size: 11.25px;">随笔</a> <a href="/tags/%E9%BB%91%E8%8B%B9%E6%9E%9C/" style="font-size: 17.5px;">黑苹果</a>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
        <a rel="license noopener" target="_blank" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png" /></a></br>
All website licensed under <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank">CC BY 4.0</a></br>
      
      &copy; 2023 StivenYang<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">主页</a>
  
    <a href="/archives" class="mobile-nav-link">归档</a>
  
    <a href="/tags/%E5%AE%89%E5%85%A8/" class="mobile-nav-link">安全</a>
  
    <a href="/%E5%85%B3%E4%BA%8E" class="mobile-nav-link">关于</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  
<script src="https://cdn.jsdelivr.net/npm/valine@1.3.10/dist/Valine.min.js"></script>

<script>
    var GUEST_INFO = ['nick','mail','link'];
    var guest_info = 'nick,mail,link'.split(',').filter(function(item){
        return GUEST_INFO.indexOf(item) > -1
    });
    var notify = 'true' == true;
    var verify = 'false' == true;
    new Valine({
        el: '.vcomment',
        notify: notify,
        verify: verify,
        appId: "WZFGfb3fsFijmCwSr5V1g1QW-gzGzoHsz",
        appKey: "IOaNIwfFDHG22j4kkrNX52Cw",
        placeholder: "留言",
        pageSize:'10',
        avatar:'mm',
        lang:'zh-cn'
    });
</script>

  </div>
</body>
</html>