<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-FGVBL4CYKC"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-FGVBL4CYKC');
</script>
<!-- End Google Analytics -->

  
  <title>k3s-配置文件总结 | StivenYang</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="article">
<meta property="og:title" content="k3s-配置文件总结">
<meta property="og:url" content="https://blog.hengshare.top/2023/05/15/k3s-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E6%80%BB%E7%BB%93/index.html">
<meta property="og:site_name" content="StivenYang">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://s2.loli.net/2023/05/15/NLB7j2KRXzodIsr.png">
<meta property="og:image" content="https://s2.loli.net/2023/05/15/rTgv5yK6UifVoQJ.png">
<meta property="article:published_time" content="2023-05-15T02:43:49.000Z">
<meta property="article:modified_time" content="2023-09-27T03:07:42.556Z">
<meta property="article:author" content="StivenYang">
<meta property="article:tag" content="运维">
<meta property="article:tag" content="kubernates">
<meta property="article:tag" content="k3s">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://s2.loli.net/2023/05/15/NLB7j2KRXzodIsr.png">
  
    <link rel="alternate" href="/atom.xml" title="StivenYang" type="application/atom+xml">
  
  
    <link rel="apple-touch-icon" sizes="180x180" href="images/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="images/favicon-16x16.png">
    <link rel="manifest" href="images/site.webmanifest">
    <!-- <link rel="shortcut icon" href="/images/favicon.png"> -->
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">StivenYang</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">StivenYang的个人网站</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">主页</a>
        
          <a class="main-nav-link" href="/archives">归档</a>
        
          <a class="main-nav-link" href="/tags/%E5%AE%89%E5%85%A8/">安全</a>
        
          <a class="main-nav-link" href="/%E5%85%B3%E4%BA%8E">关于</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS 订阅"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜索"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://blog.hengshare.top"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-k3s-配置文件总结" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/05/15/k3s-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E6%80%BB%E7%BB%93/" class="article-date">
  <time class="dt-published" datetime="2023-05-15T02:43:49.000Z" itemprop="datePublished">2023-05-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      k3s-配置文件总结
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
          <div id="toc" class="toc-article">
          <strong class="toc-title">文章目录</strong>
          <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="toc-number">1.</span> <span class="toc-text">参考资料</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E8%AF%B4%E6%98%8E"><span class="toc-number">2.</span> <span class="toc-text">简单说明</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="toc-number">3.</span> <span class="toc-text">基本语法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#YAML%E6%94%AF%E6%8C%81%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="toc-number">4.</span> <span class="toc-text">YAML支持的数据结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#K8S-YAML%E5%AD%97%E6%AE%B5"><span class="toc-number">5.</span> <span class="toc-text">K8S YAML字段</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BF%85%E9%A1%BB%E5%AD%98%E5%9C%A8%E7%9A%84%E5%B1%9E%E6%80%A7"><span class="toc-number">5.1.</span> <span class="toc-text">必须存在的属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E8%A6%81%E5%AF%B9%E8%B1%A1"><span class="toc-number">5.2.</span> <span class="toc-text">主要对象</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E5%BF%AB%E9%80%9F%E7%BC%96%E5%86%99yaml%E6%96%87%E4%BB%B6"><span class="toc-number">6.</span> <span class="toc-text">如何快速编写yaml文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8kubectl-create%E5%91%BD%E4%BB%A4%E7%94%9F%E6%88%90yaml%E6%96%87%E4%BB%B6"><span class="toc-number">6.1.</span> <span class="toc-text">使用kubectl create命令生成yaml文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8kubectl-get%E5%91%BD%E4%BB%A4%E5%AF%BC%E5%87%BAPod%E7%9A%84yaml%E6%96%87%E4%BB%B6"><span class="toc-number">6.2.</span> <span class="toc-text">使用kubectl get命令导出Pod的yaml文件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%84%E7%A7%8D%E5%AE%9E%E4%BE%8B%E8%B5%84%E6%BA%90yaml%E6%96%87%E4%BB%B6%E6%89%8B%E5%86%8C"><span class="toc-number">7.</span> <span class="toc-text">各种实例资源yaml文件手册</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#glusterfsPV-yaml"><span class="toc-number">7.1.</span> <span class="toc-text">glusterfsPV.yaml</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#PV-yaml"><span class="toc-number">7.2.</span> <span class="toc-text">PV.yaml</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#PVC-yaml"><span class="toc-number">7.3.</span> <span class="toc-text">PVC.yaml</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Deployment-yaml"><span class="toc-number">7.4.</span> <span class="toc-text">Deployment.yaml</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Pod-yaml"><span class="toc-number">7.5.</span> <span class="toc-text">Pod.yaml</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Service-yaml"><span class="toc-number">7.6.</span> <span class="toc-text">Service.yaml</span></a></li></ol></li></ol>
        </div>
        
        <h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p><a target="_blank" rel="noopener" href="https://developer.aliyun.com/article/928015">https://developer.aliyun.com/article/928015</a></p>
<h2 id="简单说明"><a href="#简单说明" class="headerlink" title="简单说明"></a>简单说明</h2><p>是一个可读性高，用来表大数据列的格式。Yaml的意思其实是：仍是一种标记语言，但是为了强调这种语言以数据为中心。而不是以标记语言为重点。</p>
<h2 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h2><ul>
<li>缩进时不允许使用Tab键，只允许使用空格</li>
<li>缩进时空格数目不重要，只要相同层级的元素左侧对齐即可</li>
<li>使用—表示新的yaml文件开始</li>
</ul>
<h2 id="YAML支持的数据结构"><a href="#YAML支持的数据结构" class="headerlink" title="YAML支持的数据结构"></a>YAML支持的数据结构</h2><ul>
<li>对象：键值对的集合，又称为映射（mapping）、哈希（hashes）&#x2F;字典（dictionary）</li>
<li>数组：一组按次序排列的值，又称为序列（sequence）&#x2F; 列表 （list）</li>
<li>纯量（scalars）：单个的，不可再分的值</li>
</ul>
<h2 id="K8S-YAML字段"><a href="#K8S-YAML字段" class="headerlink" title="K8S YAML字段"></a>K8S YAML字段</h2><h3 id="必须存在的属性"><a href="#必须存在的属性" class="headerlink" title="必须存在的属性"></a>必须存在的属性</h3><p><img src="https://s2.loli.net/2023/05/15/NLB7j2KRXzodIsr.png" alt="20230515113029"></p>
<h3 id="主要对象"><a href="#主要对象" class="headerlink" title="主要对象"></a>主要对象</h3><p><img src="https://s2.loli.net/2023/05/15/rTgv5yK6UifVoQJ.png" alt="20230515113121"></p>
<h2 id="如何快速编写yaml文件"><a href="#如何快速编写yaml文件" class="headerlink" title="如何快速编写yaml文件"></a>如何快速编写yaml文件</h2><h3 id="使用kubectl-create命令生成yaml文件"><a href="#使用kubectl-create命令生成yaml文件" class="headerlink" title="使用kubectl create命令生成yaml文件"></a>使用kubectl create命令生成yaml文件</h3><h3 id="使用kubectl-get命令导出Pod的yaml文件"><a href="#使用kubectl-get命令导出Pod的yaml文件" class="headerlink" title="使用kubectl get命令导出Pod的yaml文件"></a>使用kubectl get命令导出Pod的yaml文件</h3><h2 id="各种实例资源yaml文件手册"><a href="#各种实例资源yaml文件手册" class="headerlink" title="各种实例资源yaml文件手册"></a>各种实例资源yaml文件手册</h2><h3 id="glusterfsPV-yaml"><a href="#glusterfsPV-yaml" class="headerlink" title="glusterfsPV.yaml"></a>glusterfsPV.yaml</h3><p>1.1 endpoint. yaml</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Endpoints</span></span><br><span class="line"><span class="attr">metadata:</span> <span class="string">------------------------------------#元数据</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">glusterfs</span> <span class="string">----------------------------#ep名称</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">default</span> <span class="string">-------------------------#命名空间</span></span><br><span class="line"><span class="attr">subsets:</span> <span class="string">-------------------------------------#配置glusterfs连接信息</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">addresses:</span> <span class="string">---------------------------------#添加glusterfs分布式地址</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">ip:</span> <span class="number">10.0</span><span class="number">.0</span><span class="number">.14</span> </span><br><span class="line">  <span class="bullet">-</span> <span class="attr">ip:</span> <span class="number">10.0</span><span class="number">.0</span><span class="number">.15</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">ip:</span> <span class="number">10.0</span><span class="number">.0</span><span class="number">.16</span></span><br><span class="line">  <span class="attr">ports:</span> <span class="string">-------------------------------------#设定glusterfs服务端口</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">port:</span> <span class="number">49152</span></span><br><span class="line">    <span class="attr">protocol:</span> <span class="string">TCP</span></span><br></pre></td></tr></table></figure>

<p>1.2 glusterfs server. yaml</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Service</span></span><br><span class="line"><span class="attr">metadata:</span> </span><br><span class="line">  <span class="attr">name:</span> <span class="string">glusterfs</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">default</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">port:</span> <span class="number">49152</span></span><br><span class="line">    <span class="attr">protocol:</span> <span class="string">TCP</span></span><br><span class="line">    <span class="attr">targetPort:</span> <span class="number">49152</span></span><br><span class="line">  <span class="attr">sessionAffinity:</span> <span class="string">None</span> <span class="string">----------------------#是否支持session</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">ClusterIP</span></span><br></pre></td></tr></table></figure>
<h3 id="PV-yaml"><a href="#PV-yaml" class="headerlink" title="PV.yaml"></a>PV.yaml</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">PersistentVolume</span></span><br><span class="line"><span class="attr">metadata:</span> <span class="string">-------------------------------------#元数据</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">tomcat-mysql</span> <span class="string">--------------------------#pv名称</span></span><br><span class="line">  <span class="attr">labels:</span> <span class="string">-------------------------------------#标签信息</span></span><br><span class="line">    <span class="attr">xxx:</span> <span class="string">xxx</span> </span><br><span class="line"><span class="attr">spec:</span> <span class="string">-----------------------------------------#定义pv模板</span></span><br><span class="line">  <span class="attr">capacity:</span> <span class="string">-----------------------------------#定义pv容量</span></span><br><span class="line">    <span class="attr">storage:</span> <span class="string">10Gi</span> </span><br><span class="line">  <span class="attr">accessModes:</span> <span class="string">--------------------------------#访问模型；对象列表</span> </span><br><span class="line">                           <span class="comment">#ReadWriteOnce一人读写</span></span><br><span class="line">                           <span class="comment">#ReadOnlyMany 多人只读</span></span><br><span class="line">                           <span class="comment">#ReadWriteMany多人读写</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">ReadWriteMany</span> </span><br><span class="line">  <span class="attr">persistentVolumeReclaimPolicy:</span> <span class="string">Recycle</span> <span class="string">------#pvc解除绑定后，数据操作</span></span><br><span class="line">                                               <span class="comment">#默认是Retain保留生成的数据、</span></span><br><span class="line">                                               <span class="comment">#recycle回收</span></span><br><span class="line">                                               <span class="comment">#delete，删除</span></span><br><span class="line"><span class="string">=========================================================================================</span>  </span><br><span class="line">  <span class="comment">#nfs: 类型</span></span><br><span class="line">  <span class="attr">nfs:</span>  <span class="string">---------------------------------------#nfs挂载类型</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">&quot;/data/tomcat&quot;</span> <span class="string">----------------------#nfs服务目录</span></span><br><span class="line">    <span class="attr">server:</span> <span class="number">172.16</span><span class="number">.20</span><span class="number">.101</span> <span class="string">---------------------#nfs服务地址</span></span><br><span class="line">    <span class="attr">readOnly:</span> <span class="literal">false</span> <span class="string">---------------------------#关闭只读</span></span><br><span class="line"><span class="string">=========================================================================================</span></span><br><span class="line">   <span class="comment">#glusterfs：分布式类型 注意：使用glusterfs 需要提交部署endpoint服务</span></span><br><span class="line">   <span class="attr">glusterfs:</span> <span class="string">-------------------------------#glusterfs挂载类型</span></span><br><span class="line">    <span class="attr">endpoints:</span> <span class="string">&quot;glusterfs&quot;</span> <span class="string">--------------------#端点类型</span> <span class="string">请保持与glusterfs</span> <span class="string">ep服务名称一致。</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">&quot;qiangge&quot;</span> <span class="string">---------------------------#挂载目录</span> <span class="string">glusterfs文件名称</span></span><br><span class="line">    <span class="attr">readOnly:</span> <span class="literal">false</span> <span class="string">---------------------------#关闭只读</span></span><br></pre></td></tr></table></figure>

<h3 id="PVC-yaml"><a href="#PVC-yaml" class="headerlink" title="PVC.yaml"></a>PVC.yaml</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">PersistentVolumeClaim</span></span><br><span class="line"><span class="attr">metadata:</span> <span class="string">-------------------------------------#元数据</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">html</span> <span class="string">----------------------------------#pvc名称</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">xxxx</span> <span class="string">-----------------------------#命名空间</span></span><br><span class="line"><span class="attr">spec:</span> <span class="string">-----------------------------------------#pvc模板</span></span><br><span class="line">  <span class="attr">selector:</span> <span class="string">-----------------------------------#标签选择器</span></span><br><span class="line">    <span class="attr">matchLabels:</span>  <span class="string">-----------------------------#必须与pv标签信息一致才可关联</span> <span class="string">如果不指定则随机匹配pv</span></span><br><span class="line">    <span class="attr">xxx:</span> <span class="string">xxx</span></span><br><span class="line">  <span class="attr">accessModes:</span> <span class="string">--------------------------------#访问模型；对象列表</span> </span><br><span class="line">                           <span class="comment">#ReadWriteOnce一人读写</span></span><br><span class="line">                           <span class="comment">#ReadOnlyMany 多人只读</span></span><br><span class="line">                           <span class="comment">#ReadWriteMany多人读写</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">ReadWriteMany</span></span><br><span class="line">  <span class="attr">resources:</span> <span class="string">----------------------------------#资源信息</span></span><br><span class="line">    <span class="attr">requests:</span> <span class="string">---------------------------------#请求容量</span></span><br><span class="line">      <span class="attr">storage:</span> <span class="string">99Gi</span></span><br><span class="line">  <span class="attr">storageClassName:</span> <span class="string">xxxx</span> <span class="string">-----------------#存储类名称</span> <span class="string">注意1.5.2版本不可用</span></span><br><span class="line">  <span class="attr">volumeMode:</span> <span class="string">Filesystem</span> <span class="string">----------------------#卷模式为文件系统</span> <span class="string">注意1.5.2版本不可用</span></span><br><span class="line">  <span class="attr">volumeName:</span> <span class="string">pvc-ff926bb2-3029-4a08-b123-31a2ad1b6a19</span> <span class="string">--#卷名称</span></span><br></pre></td></tr></table></figure>

<h3 id="Deployment-yaml"><a href="#Deployment-yaml" class="headerlink" title="Deployment.yaml"></a>Deployment.yaml</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">extensions/v1beta1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">metadata:</span> <span class="string">----------------------------------------#元数据</span></span><br><span class="line">  <span class="attr">annotations:</span> <span class="string">-------------------------------------#注释信息</span></span><br><span class="line">    <span class="attr">deployment.kubernetes.io/revision:</span> <span class="string">&#x27;1&#x27;</span></span><br><span class="line">    <span class="attr">k8s.kuboard.cn/ingress:</span> <span class="string">&#x27;false&#x27;</span></span><br><span class="line">    <span class="attr">k8s.kuboard.cn/service:</span> <span class="string">NodePort</span></span><br><span class="line">    <span class="attr">k8s.kuboard.cn/workload:</span> <span class="string">nextcloud</span></span><br><span class="line">  <span class="string">labels:-------------------------------------------#标签信息</span></span><br><span class="line">    <span class="attr">k8s.kuboard.cn/layer:</span> <span class="string">&#x27;&#x27;</span>            </span><br><span class="line">    <span class="attr">k8s.kuboard.cn/name:</span> <span class="string">nextcloud</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">nextcloud-----------------------------------#名称</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">nextcloud------------------------------#命名空间</span> </span><br><span class="line"><span class="string">spec:-----------------------------------------------#定义容器模板，该模板可以包含多个容器</span> </span><br><span class="line">  <span class="attr">replicas:</span> <span class="number">3</span><span class="string">---------------------------------------#副本数量</span></span><br><span class="line">  <span class="string">selector:-----------------------------------------#标签选择器</span></span><br><span class="line">    <span class="attr">matchLabels:</span></span><br><span class="line">      <span class="attr">k8s.kuboard.cn/layer:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">      <span class="attr">k8s.kuboard.cn/name:</span> <span class="string">nextcloud</span></span><br><span class="line">  <span class="string">strategy:-----------------------------------------#滚动升级策略</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">RollingUpdate-----------------------------#类型</span></span><br><span class="line">    <span class="string">rollingUpdate:----------------------------------#由于replicas为3,则整个升级,pod个数在2-4个之间</span>    </span><br><span class="line">      <span class="attr">maxSurge:</span> <span class="number">25</span><span class="string">%---------------------------------#滚动升级时会先启动25%pod</span>  </span><br><span class="line">      <span class="attr">maxUnavailable:</span> <span class="number">25</span><span class="string">%---------------------------#滚动升级时允许的最大Unavailable的pod个数</span></span><br><span class="line">  <span class="attr">template:</span>                     <span class="comment">#镜像模板                   </span></span><br><span class="line">    <span class="attr">metadata:</span> <span class="string">------------------------------------#元数据</span></span><br><span class="line">      <span class="string">labels:---------------------------------------#标签</span></span><br><span class="line">        <span class="attr">k8s.kuboard.cn/layer:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">        <span class="attr">k8s.kuboard.cn/name:</span> <span class="string">nextcloud</span></span><br><span class="line">    <span class="attr">spec:</span> <span class="string">------------------------------------------#定义容器模板，该模板可以包含多个容器</span></span><br><span class="line">      <span class="attr">containers:</span> <span class="string">----------------------------------#容器信息</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nextcloud</span> <span class="string">--------------------------#容器名称</span></span><br><span class="line">          <span class="attr">image:</span> <span class="string">&#x27;172.16.20.100/library/nextcloud:yan&#x27;</span> <span class="comment">#镜像名称</span></span><br><span class="line">          <span class="attr">imagePullPolicy:</span> <span class="string">Always</span> <span class="string">------------------#镜像下载策略</span> </span><br><span class="line">          <span class="attr">ports:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">http</span></span><br><span class="line">              <span class="attr">containerPort:</span> <span class="number">80</span></span><br><span class="line">              <span class="attr">protocol:</span> <span class="string">TCP</span></span><br><span class="line">          <span class="string">env</span></span><br><span class="line">          <span class="attr">resources:</span> <span class="string">-------------------------------#CPU内存限制</span></span><br><span class="line">        <span class="attr">limits:</span> <span class="string">--------------------------------#限制cpu内存</span>                      </span><br><span class="line">              <span class="attr">cpu:</span> <span class="string">200m</span></span><br><span class="line">              <span class="attr">memory:</span> <span class="string">200m</span></span><br><span class="line">            <span class="attr">requests:</span> <span class="string">------------------------------#请求cpu内存</span></span><br><span class="line">              <span class="attr">cpu:</span> <span class="string">100m</span></span><br><span class="line">              <span class="attr">memory:</span> <span class="string">100m</span></span><br><span class="line">          <span class="attr">securityContext:</span> <span class="string">-------------------------#安全设定</span></span><br><span class="line">            <span class="attr">privileged:</span> <span class="literal">true</span> <span class="string">-----------------------#开启享有特权</span></span><br><span class="line">          <span class="attr">volumeMounts:</span> <span class="string">----------------------------#挂载volumes中定义的磁盘</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">html</span> <span class="string">---------------------------#挂载容器1</span></span><br><span class="line">              <span class="attr">mountPath:</span> <span class="string">/var/www/html</span> </span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">session</span> <span class="string">------------------------#挂载容器1</span></span><br><span class="line">              <span class="attr">mountPath:</span> <span class="string">/var/lib/php/session</span>       </span><br><span class="line">      <span class="attr">volumes:</span>  <span class="string">------------------------------------#在该pod上定义共享存储卷列表</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">html</span> <span class="string">-------------------------------#共享存储卷名称</span> <span class="string">（volumes类型有很多种）</span></span><br><span class="line">          <span class="attr">persistentVolumeClaim:</span> <span class="string">-------------------#volumes类型为pvc</span></span><br><span class="line">            <span class="attr">claimName:</span> <span class="string">html</span>  <span class="string">-----------------------#关联pvc名称</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">session</span></span><br><span class="line">          <span class="attr">persistentVolumeClaim:</span></span><br><span class="line">            <span class="attr">claimName:</span> <span class="string">session</span>        </span><br><span class="line">      <span class="attr">restartPolicy:</span> <span class="string">Always</span> <span class="string">------------------------#Pod的重启策略</span> </span><br><span class="line">                              <span class="comment">#Always表示一旦不管以何种方式终止运行，</span></span><br><span class="line">                              <span class="comment">#kubelet都将重启，</span></span><br><span class="line">                              <span class="comment">#OnFailure表示只有Pod以非0退出码退出才重启，</span></span><br><span class="line">                              <span class="comment">#Nerver表示不再重启该Pod</span></span><br><span class="line">      <span class="attr">schedulerName:</span> <span class="string">default-scheduler</span> <span class="string">-------------#指定pod调度到节点</span></span><br></pre></td></tr></table></figure>

<h3 id="Pod-yaml"><a href="#Pod-yaml" class="headerlink" title="Pod.yaml"></a>Pod.yaml</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span>             <span class="comment">#指定api版本，此值必须在kubectl apiversion中  </span></span><br><span class="line">  <span class="attr">kind:</span> <span class="string">Pod</span>                  <span class="comment">#指定创建资源的角色/类型  </span></span><br><span class="line">  <span class="attr">metadata:</span>                  <span class="comment">#资源的元数据/属性  </span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">django-pod</span>         <span class="comment">#资源的名字，在同一个namespace中必须唯一  </span></span><br><span class="line">    <span class="attr">labels:</span>                  <span class="comment">#设定资源的标签，使这个标签在service网络中备案，以便被获知</span></span><br><span class="line">      <span class="attr">k8s-app:</span> <span class="string">django</span></span><br><span class="line">      <span class="attr">version:</span> <span class="string">v1</span>  </span><br><span class="line">      <span class="attr">kubernetes.io/cluster-service:</span> <span class="string">&quot;true&quot;</span>  </span><br><span class="line">    <span class="attr">annotations:</span>             <span class="comment">#设置自定义注解列表  </span></span><br><span class="line">       <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">String</span>         <span class="comment">#设置自定义注解名字  </span></span><br><span class="line">  <span class="attr">spec:</span>                      <span class="comment">#设置该资源的内容  </span></span><br><span class="line">    <span class="attr">restartPolicy:</span> <span class="string">Always</span>    <span class="comment">#表示自动重启，一直都会有这个容器运行</span></span><br><span class="line">    <span class="attr">nodeSelector:</span>            <span class="comment">#选择node节点14     zone: node1  </span></span><br><span class="line">    <span class="attr">containers:</span>  </span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">django-pod</span>        <span class="comment">#容器的名字  </span></span><br><span class="line">      <span class="attr">image:</span> <span class="string">django:v1.1</span>      <span class="comment">#容器使用的镜像地址  </span></span><br><span class="line">      <span class="attr">imagePullPolicy:</span> <span class="string">Never</span> <span class="comment">#三个选择Always、Never、IfNotPresent，每次启动时检查和更新（从registery）images的策略，</span></span><br><span class="line">                             <span class="comment"># Always，每次都检查</span></span><br><span class="line">                             <span class="comment"># Never，每次都不检查（不管本地是否有）</span></span><br><span class="line">                             <span class="comment"># IfNotPresent，如果本地有就不检查，如果没有就拉取</span></span><br><span class="line">      <span class="attr">command:</span> [<span class="string">&#x27;sh&#x27;</span>]        <span class="comment">#启动容器的运行命令，将覆盖容器中的Entrypoint,对应Dockefile中的ENTRYPOINT  </span></span><br><span class="line">      <span class="attr">args:</span> [<span class="string">&quot;$(str)&quot;</span>]       <span class="comment">#启动容器的命令参数，对应Dockerfile中CMD参数  </span></span><br><span class="line">      <span class="attr">env:</span>                   <span class="comment">#指定容器中的环境变量  </span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">str</span>            <span class="comment">#变量的名字  </span></span><br><span class="line">        <span class="attr">value:</span> <span class="string">&quot;/etc/run.sh&quot;</span> <span class="comment">#变量的值  </span></span><br><span class="line">      <span class="attr">resources:</span>             <span class="comment">#资源管理</span></span><br><span class="line">        <span class="attr">requests:</span>            <span class="comment">#容器运行时，最低资源需求，也就是说最少需要多少资源容器才能正常运行  </span></span><br><span class="line">        <span class="attr">cpu:</span> <span class="number">0.1</span>           <span class="comment">#CPU资源（核数），两种方式，浮点数或者是整数+m，0.1=100m，最少值为0.001核（1m）</span></span><br><span class="line">          <span class="attr">memory:</span> <span class="string">32Mi</span>       <span class="comment">#内存使用量  </span></span><br><span class="line">        <span class="attr">limits:</span>              <span class="comment">#资源限制  </span></span><br><span class="line">          <span class="attr">cpu:</span> <span class="number">0.5</span>  </span><br><span class="line">          <span class="attr">memory:</span> <span class="string">32Mi</span>  </span><br><span class="line">      <span class="attr">ports:</span>  </span><br><span class="line">      <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">8080</span>    <span class="comment">#容器开发对外的端口</span></span><br><span class="line">        <span class="attr">name:</span> <span class="string">uwsgi</span>          <span class="comment">#名称</span></span><br><span class="line">        <span class="attr">protocol:</span> <span class="string">TCP</span>  </span><br><span class="line">      <span class="attr">livenessProbe:</span>         <span class="comment">#pod内容器健康检查的设置</span></span><br><span class="line">        <span class="attr">httpGet:</span>             <span class="comment">#通过httpget检查健康，返回200-399之间，则认为容器正常  </span></span><br><span class="line">          <span class="attr">path:</span> <span class="string">/</span>            <span class="comment">#URI地址  </span></span><br><span class="line">          <span class="attr">port:</span> <span class="number">8080</span>  </span><br><span class="line">          <span class="comment">#host: 127.0.0.1   #主机地址  </span></span><br><span class="line">          <span class="attr">scheme:</span> <span class="string">HTTP</span>  </span><br><span class="line">        <span class="attr">initialDelaySeconds:</span> <span class="number">180</span> <span class="comment">#表明第一次检测在容器启动后多长时间后开始  </span></span><br><span class="line">        <span class="attr">timeoutSeconds:</span> <span class="number">5</span>    <span class="comment">#检测的超时时间  </span></span><br><span class="line">        <span class="attr">periodSeconds:</span> <span class="number">15</span>    <span class="comment">#检查间隔时间  </span></span><br><span class="line">        <span class="comment">#也可以用这种方法  </span></span><br><span class="line">        <span class="comment">#exec: 执行命令的方法进行监测，如果其退出码不为0，则认为容器正常  </span></span><br><span class="line">        <span class="comment">#  command:  </span></span><br><span class="line">        <span class="comment">#    - cat  </span></span><br><span class="line">        <span class="comment">#    - /tmp/health  </span></span><br><span class="line">        <span class="comment">#也可以用这种方法  </span></span><br><span class="line">        <span class="comment">#tcpSocket: //通过tcpSocket检查健康   </span></span><br><span class="line">        <span class="comment">#  port: number   </span></span><br><span class="line">      <span class="attr">lifecycle:</span>             <span class="comment">#生命周期管理(钩子)  </span></span><br><span class="line">        <span class="attr">postStart:</span>           <span class="comment">#容器运行之前运行的任务  </span></span><br><span class="line">          <span class="attr">exec:</span>  </span><br><span class="line">            <span class="attr">command:</span>  </span><br><span class="line">              <span class="bullet">-</span> <span class="string">&#x27;sh&#x27;</span>  </span><br><span class="line">              <span class="bullet">-</span> <span class="string">&#x27;yum upgrade -y&#x27;</span>  </span><br><span class="line">        <span class="attr">preStop:</span>             <span class="comment">#容器关闭之前运行的任务  </span></span><br><span class="line">          <span class="attr">exec:</span>  </span><br><span class="line">            <span class="attr">command:</span> [<span class="string">&#x27;service httpd stop&#x27;</span>]  </span><br><span class="line">      <span class="attr">volumeMounts:</span>          <span class="comment">#挂载设置</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">volume</span>         <span class="comment">#挂载设备的名字，与volumes[*].name 需要对应    </span></span><br><span class="line">        <span class="attr">mountPath:</span> <span class="string">/data</span>     <span class="comment">#挂载到容器的某个路径下  </span></span><br><span class="line">        <span class="attr">readOnly:</span> <span class="literal">True</span>  </span><br><span class="line">    <span class="attr">volumes:</span>                 <span class="comment">#定义一组挂载设备  </span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">volume</span>           <span class="comment">#定义一个挂载设备的名字  </span></span><br><span class="line">      <span class="comment">#meptyDir: &#123;&#125;  </span></span><br><span class="line">      <span class="attr">hostPath:</span>  </span><br><span class="line">        <span class="attr">path:</span> <span class="string">/opt</span>           <span class="comment">#挂载设备类型为hostPath，路径为宿主机下的/opt</span></span><br></pre></td></tr></table></figure>

<h3 id="Service-yaml"><a href="#Service-yaml" class="headerlink" title="Service.yaml"></a>Service.yaml</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Service</span></span><br><span class="line"><span class="attr">metadata:</span>  <span class="string">---------------------------------#元数据</span></span><br><span class="line">  <span class="attr">annotations:</span> <span class="string">-----------------------------#注释信息</span></span><br><span class="line">    <span class="attr">k8s.kuboard.cn/workload:</span> <span class="string">nextcloud</span></span><br><span class="line">  <span class="attr">labels:</span> <span class="string">----------------------------------#标签信息</span></span><br><span class="line">    <span class="attr">k8s.kuboard.cn/layer:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="attr">k8s.kuboard.cn/name:</span> <span class="string">nextcloud</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">nextcloud</span> <span class="string">--------------------------#名称</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">nextcloud</span> <span class="string">---------------------#命名空间</span></span><br><span class="line"><span class="attr">spec:</span> <span class="string">--------------------------------------#定义Service模板</span></span><br><span class="line">  <span class="attr">clusterIP:</span> <span class="number">10.0</span><span class="number">.181</span><span class="number">.206</span> <span class="string">------------------#指定svcip地址</span> <span class="string">不指定则随机</span> </span><br><span class="line">  </span><br><span class="line"> <span class="string">=================================================================================================</span></span><br><span class="line">  <span class="comment">#NodePort类型：集群外网络</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">NodePort</span> <span class="string">---------------------------#类型为NodePort</span>  </span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">mnwwwp</span></span><br><span class="line">      <span class="attr">nodePort:</span> <span class="number">30001</span> <span class="string">----------------------#当type</span> <span class="string">=</span> <span class="string">NodePort时，指定映射到物理机的端口号</span></span><br><span class="line">      <span class="attr">port:</span> <span class="number">80</span> <span class="string">-----------------------------#服务监听的端口号</span></span><br><span class="line">      <span class="attr">protocol:</span> <span class="string">TCP</span> <span class="string">------------------------#端口协议，支持TCP和UDP，默认TCP</span></span><br><span class="line">      <span class="attr">targetPort:</span> <span class="number">80</span> <span class="string">-----------------------#需要转发到后端Pod的端口号</span></span><br><span class="line">  </span><br><span class="line">  <span class="string">==================================================================================================</span></span><br><span class="line">  <span class="comment">#ClusterIP类型： 集群内网络</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">ClusterIP</span> <span class="string">--------------------------#</span></span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">mnwwwp</span></span><br><span class="line">      <span class="attr">port:</span> <span class="number">80</span></span><br><span class="line">      <span class="attr">protocol:</span> <span class="string">TCP</span></span><br><span class="line">      <span class="attr">targetPort:</span> <span class="number">80</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">j5smwx</span></span><br><span class="line">      <span class="attr">port:</span> <span class="number">22</span></span><br><span class="line">      <span class="attr">protocol:</span> <span class="string">TCP</span></span><br><span class="line">      <span class="attr">targetPort:</span> <span class="number">22</span></span><br><span class="line">      </span><br><span class="line">  <span class="attr">selector:</span>  <span class="string">-------------------------------#label</span> <span class="string">selector配置，将选择具有label标签的Pod作为管理</span> </span><br><span class="line">    <span class="attr">k8s.kuboard.cn/layer:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="attr">k8s.kuboard.cn/name:</span> <span class="string">nextcloud</span></span><br><span class="line">  <span class="attr">sessionAffinity:</span> <span class="string">None</span> <span class="string">--------------------#是否支持session</span></span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.hengshare.top/2023/05/15/k3s-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E6%80%BB%E7%BB%93/" data-id="cln162dkm0013w04e762n8ynz" data-title="k3s-配置文件总结" class="article-share-link">分享</a>
      
      
        <a href="/2023/05/15/k3s-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E6%80%BB%E7%BB%93/#comments" class="article-comment-link">
          <span class="post-comments-count valine-comment-count" data-xid="/2023/05/15/k3s-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E6%80%BB%E7%BB%93/" itemprop="commentCount"></span>
          留言
        </a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/k3s/" rel="tag">k3s</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/kubernates/" rel="tag">kubernates</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%BF%90%E7%BB%B4/" rel="tag">运维</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2023/05/16/redis-6%E5%92%8Credis-7%E7%9A%84%E5%AF%B9%E6%AF%94/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">前一篇</strong>
      <div class="article-nav-title">
        
          redis 6和redis 7的对比
        
      </div>
    </a>
  
  
    <a href="/2023/05/10/linux%E6%B5%81%E9%87%8F%E7%9B%91%E6%8E%A7%E5%B7%A5%E5%85%B7/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">后一篇</strong>
      <div class="article-nav-title">linux流量监控工具-nload</div>
    </a>
  
</nav>

  
</article>



  <section id="comments" class="vcomment">

  </section>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/10/">十月 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/09/">九月 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/06/">六月 2023</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">五月 2023</a><span class="archive-list-count">17</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/04/">四月 2023</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/03/">三月 2023</a><span class="archive-list-count">36</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>


  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/AI/" rel="tag">AI</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android/" rel="tag">Android</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Docker/" rel="tag">Docker</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/" rel="tag">Java</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MQ/" rel="tag">MQ</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MacOs/" rel="tag">MacOs</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redis/" rel="tag">Redis</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/chrome%E6%8F%92%E4%BB%B6/" rel="tag">chrome插件</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/" rel="tag">css</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gcc/" rel="tag">gcc</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/" rel="tag">git</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/go/" rel="tag">go</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/" rel="tag">hexo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/html/" rel="tag">html</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/k3s/" rel="tag">k3s</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kubernates/" rel="tag">kubernates</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/" rel="tag">linux</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lua/" rel="tag">lua</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/maven/" rel="tag">maven</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mq/" rel="tag">mq</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/" rel="tag">mysql</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nginx/" rel="tag">nginx</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/openrestry/" rel="tag">openrestry</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/picgo/" rel="tag">picgo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vmware/" rel="tag">vmware</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vscode/" rel="tag">vscode</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/zsh/" rel="tag">zsh</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%AD%E9%97%B4%E4%BB%B6/" rel="tag">中间件</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BA%A7%E7%BA%BF%E9%97%AE%E9%A2%98/" rel="tag">产线问题</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BB%A3%E7%90%86/" rel="tag">代理</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%90%8D%E8%AF%8D%E8%A7%A3%E9%87%8A/" rel="tag">名词解释</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%90%8E%E7%AB%AF/" rel="tag">后端</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" rel="tag">基础知识</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AE%89%E5%85%A8/" rel="tag">安全</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93/" rel="tag">工作总结</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B7%A5%E5%85%B7/" rel="tag">工具</a><span class="tag-list-count">19</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/" rel="tag">开发工具</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag">数据库</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%97%A5%E5%B8%B8%E9%9A%8F%E7%AC%94/" rel="tag">日常随笔</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B5%8B%E8%AF%95/" rel="tag">测试</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BD%91%E7%BB%9C/" rel="tag">网络</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BF%90%E7%BB%B4/" rel="tag">运维</a><span class="tag-list-count">14</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%80%86%E5%90%91/" rel="tag">逆向</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9A%8F%E7%AC%94/" rel="tag">随笔</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%BB%91%E8%8B%B9%E6%9E%9C/" rel="tag">黑苹果</a><span class="tag-list-count">7</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/10/19/ai/%E8%87%AA%E5%BB%BAchatgpt/">搭建属于自己的chatgpt</a>
          </li>
        
          <li>
            <a href="/2023/09/27/springboot%E4%B8%ADwebsocket%E4%BD%BF%E7%94%A8/">springboot中websocket使用</a>
          </li>
        
          <li>
            <a href="/2023/06/16/%E5%9B%BE%E5%83%8F-jpg-png%E7%AD%89%E5%9B%BE%E7%89%87%E6%A0%BC%E5%BC%8F%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB/">图像-jpg,png等图片格式有什么区别</a>
          </li>
        
          <li>
            <a href="/2023/06/08/consul-%E7%AE%80%E5%8D%95%E4%BB%8B%E7%BB%8D/">consul-简单介绍</a>
          </li>
        
          <li>
            <a href="/2023/06/02/go-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">go-学习笔记</a>
          </li>
        
          <li>
            <a href="/2023/06/02/go-%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Go-Modules%E7%9A%84go-mod%E4%B8%8Ego-sum/">go-深入理解Go Modules的go.mod与go.sum</a>
          </li>
        
          <li>
            <a href="/2023/05/31/ffplay%E5%8F%82%E6%95%B0%E4%BB%A5%E5%8F%8A%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/">ffplay参数以及常用命令</a>
          </li>
        
          <li>
            <a href="/2023/05/31/ffprobe%E5%8F%82%E6%95%B0%E4%BB%A5%E5%8F%8A%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/">ffprobe参数以及常用命令</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/AI/" style="font-size: 12.5px;">AI</a> <a href="/tags/Android/" style="font-size: 10px;">Android</a> <a href="/tags/Docker/" style="font-size: 10px;">Docker</a> <a href="/tags/Java/" style="font-size: 10px;">Java</a> <a href="/tags/MQ/" style="font-size: 10px;">MQ</a> <a href="/tags/MacOs/" style="font-size: 16.25px;">MacOs</a> <a href="/tags/Redis/" style="font-size: 10px;">Redis</a> <a href="/tags/chrome%E6%8F%92%E4%BB%B6/" style="font-size: 10px;">chrome插件</a> <a href="/tags/css/" style="font-size: 11.25px;">css</a> <a href="/tags/gcc/" style="font-size: 10px;">gcc</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/go/" style="font-size: 11.25px;">go</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/html/" style="font-size: 10px;">html</a> <a href="/tags/k3s/" style="font-size: 17.5px;">k3s</a> <a href="/tags/kubernates/" style="font-size: 17.5px;">kubernates</a> <a href="/tags/linux/" style="font-size: 16.25px;">linux</a> <a href="/tags/lua/" style="font-size: 10px;">lua</a> <a href="/tags/maven/" style="font-size: 10px;">maven</a> <a href="/tags/mq/" style="font-size: 10px;">mq</a> <a href="/tags/mysql/" style="font-size: 10px;">mysql</a> <a href="/tags/nginx/" style="font-size: 13.75px;">nginx</a> <a href="/tags/openrestry/" style="font-size: 11.25px;">openrestry</a> <a href="/tags/picgo/" style="font-size: 10px;">picgo</a> <a href="/tags/vmware/" style="font-size: 10px;">vmware</a> <a href="/tags/vscode/" style="font-size: 12.5px;">vscode</a> <a href="/tags/zsh/" style="font-size: 10px;">zsh</a> <a href="/tags/%E4%B8%AD%E9%97%B4%E4%BB%B6/" style="font-size: 10px;">中间件</a> <a href="/tags/%E4%BA%A7%E7%BA%BF%E9%97%AE%E9%A2%98/" style="font-size: 11.25px;">产线问题</a> <a href="/tags/%E4%BB%A3%E7%90%86/" style="font-size: 11.25px;">代理</a> <a href="/tags/%E5%90%8D%E8%AF%8D%E8%A7%A3%E9%87%8A/" style="font-size: 10px;">名词解释</a> <a href="/tags/%E5%90%8E%E7%AB%AF/" style="font-size: 10px;">后端</a> <a href="/tags/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" style="font-size: 11.25px;">基础知识</a> <a href="/tags/%E5%AE%89%E5%85%A8/" style="font-size: 10px;">安全</a> <a href="/tags/%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93/" style="font-size: 10px;">工作总结</a> <a href="/tags/%E5%B7%A5%E5%85%B7/" style="font-size: 20px;">工具</a> <a href="/tags/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/" style="font-size: 11.25px;">开发工具</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" style="font-size: 10px;">数据库</a> <a href="/tags/%E6%97%A5%E5%B8%B8%E9%9A%8F%E7%AC%94/" style="font-size: 12.5px;">日常随笔</a> <a href="/tags/%E6%B5%8B%E8%AF%95/" style="font-size: 10px;">测试</a> <a href="/tags/%E7%BD%91%E7%BB%9C/" style="font-size: 15px;">网络</a> <a href="/tags/%E8%BF%90%E7%BB%B4/" style="font-size: 18.75px;">运维</a> <a href="/tags/%E9%80%86%E5%90%91/" style="font-size: 10px;">逆向</a> <a href="/tags/%E9%9A%8F%E7%AC%94/" style="font-size: 11.25px;">随笔</a> <a href="/tags/%E9%BB%91%E8%8B%B9%E6%9E%9C/" style="font-size: 17.5px;">黑苹果</a>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
        <a rel="license noopener" target="_blank" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png" /></a></br>
All website licensed under <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank">CC BY 4.0</a></br>
      
      &copy; 2023 StivenYang<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">主页</a>
  
    <a href="/archives" class="mobile-nav-link">归档</a>
  
    <a href="/tags/%E5%AE%89%E5%85%A8/" class="mobile-nav-link">安全</a>
  
    <a href="/%E5%85%B3%E4%BA%8E" class="mobile-nav-link">关于</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  
<script src="https://cdn.jsdelivr.net/npm/valine@1.3.10/dist/Valine.min.js"></script>

<script>
    var GUEST_INFO = ['nick','mail','link'];
    var guest_info = 'nick,mail,link'.split(',').filter(function(item){
        return GUEST_INFO.indexOf(item) > -1
    });
    var notify = 'true' == true;
    var verify = 'false' == true;
    new Valine({
        el: '.vcomment',
        notify: notify,
        verify: verify,
        appId: "WZFGfb3fsFijmCwSr5V1g1QW-gzGzoHsz",
        appKey: "IOaNIwfFDHG22j4kkrNX52Cw",
        placeholder: "留言",
        pageSize:'10',
        avatar:'mm',
        lang:'zh-cn'
    });
</script>

  </div>
</body>
</html>